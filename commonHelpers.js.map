{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputEl = document.querySelector('#datetime-picker');\nconst refs = {\n  faceClock: document.querySelector('.timer'),\n  dayEl: document.querySelector('[data-days]'),\n  hourEl: document.querySelector('[data-hours]'),\n  minuteEl: document.querySelector('[data-minutes]'),\n  secondEl: document.querySelector('[data-seconds]'),\n  startBtn: document.querySelector('[data-start]'),\n};\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n    if (selectedDate) {\n      if (selectedDate.getTime() > Date.now()) {\n        userSelectedDate = selectedDate;\n        refs.startBtn.disabled = false;\n      } else {\n        userSelectedDate = null;\n        refs.startBtn.disabled = true;\n        iziToast.error({\n          timeout: false,\n          position: 'topRight',\n          message: 'Please choose a date in the future',\n          messageColor: '#fff',\n          backgroundColor: 'red',\n          close: false,\n          closeOnClick: true,\n        });\n      }\n    }\n  },\n};\nflatpickr(inputEl, options);\n\nlet userSelectedDate = null;\nlet intervalId = null;\nrefs.startBtn.disabled = true;\n\nconst time = {\n  start() {\n    if (userSelectedDate) {\n      refs.startBtn.disabled = true;\n      inputEl.disabled = true;\n      intervalId = setInterval(() => {\n        const currentTime = Date.now();\n        const deltaTime = userSelectedDate.getTime() - currentTime;\n\n        if (deltaTime <= 0) {\n          clearInterval(intervalId);\n          refs.startBtn.disabled = true;\n          inputEl.disabled = false;\n        } else {\n          const time1 = convertMs(deltaTime);\n          updateClockface(time1);\n        }\n      }, 1000);\n    }\n  },\n};\n\nrefs.startBtn.addEventListener('click', onClickStart);\nfunction onClickStart() {\n  time.start();\n}\n\nfunction convertMs(ms) {\n  function addLeadingZero(value) {\n    return String(value).padStart(2, '0');\n  }\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return {\n    days: addLeadingZero(days),\n    hours: addLeadingZero(hours),\n    minutes: addLeadingZero(minutes),\n    seconds: addLeadingZero(seconds),\n  };\n}\n\nfunction updateClockface({ days, hours, minutes, seconds }) {\n  refs.dayEl.textContent = days;\n  refs.hourEl.textContent = hours;\n  refs.minuteEl.textContent = minutes;\n  refs.secondEl.textContent = seconds;\n}\n"],"names":["inputEl","refs","options","selectedDates","selectedDate","userSelectedDate","iziToast","flatpickr","intervalId","time","currentTime","deltaTime","time1","convertMs","updateClockface","onClickStart","ms","addLeadingZero","value","second","minute","hour","day","days","hours","minutes","seconds"],"mappings":"6vBAKA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAO,CACX,UAAW,SAAS,cAAc,QAAQ,EAC1C,MAAO,SAAS,cAAc,aAAa,EAC3C,OAAQ,SAAS,cAAc,cAAc,EAC7C,SAAU,SAAS,cAAc,gBAAgB,EACjD,SAAU,SAAS,cAAc,gBAAgB,EACjD,SAAU,SAAS,cAAc,cAAc,CACjD,EAEMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAChCC,IACEA,EAAa,QAAO,EAAK,KAAK,IAAG,GACnCC,EAAmBD,EACnBH,EAAK,SAAS,SAAW,KAEzBI,EAAmB,KACnBJ,EAAK,SAAS,SAAW,GACzBK,EAAS,MAAM,CACb,QAAS,GACT,SAAU,WACV,QAAS,qCACT,aAAc,OACd,gBAAiB,MACjB,MAAO,GACP,aAAc,EACxB,CAAS,GAGN,CACH,EACAC,EAAUP,EAASE,CAAO,EAE1B,IAAIG,EAAmB,KACnBG,EAAa,KACjBP,EAAK,SAAS,SAAW,GAEzB,MAAMQ,EAAO,CACX,OAAQ,CACFJ,IACFJ,EAAK,SAAS,SAAW,GACzBD,EAAQ,SAAW,GACnBQ,EAAa,YAAY,IAAM,CAC7B,MAAME,EAAc,KAAK,MACnBC,EAAYN,EAAiB,QAAO,EAAKK,EAE/C,GAAIC,GAAa,EACf,cAAcH,CAAU,EACxBP,EAAK,SAAS,SAAW,GACzBD,EAAQ,SAAW,OACd,CACL,MAAMY,EAAQC,EAAUF,CAAS,EACjCG,EAAgBF,CAAK,CACtB,CACF,EAAE,GAAI,EAEV,CACH,EAEAX,EAAK,SAAS,iBAAiB,QAASc,CAAY,EACpD,SAASA,GAAe,CACtBN,EAAK,MAAK,CACZ,CAEA,SAASI,EAAUG,EAAI,CACrB,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CACD,MAAMC,EAAS,IACTC,EAASD,EAAS,GAClBE,EAAOD,EAAS,GAChBE,EAAMD,EAAO,GAEbE,EAAO,KAAK,MAAMP,EAAKM,CAAG,EAC1BE,EAAQ,KAAK,MAAOR,EAAKM,EAAOD,CAAI,EACpCI,EAAU,KAAK,MAAQT,EAAKM,EAAOD,EAAQD,CAAM,EACjDM,EAAU,KAAK,MAASV,EAAKM,EAAOD,EAAQD,EAAUD,CAAM,EAElE,MAAO,CACL,KAAMF,EAAeM,CAAI,EACzB,MAAON,EAAeO,CAAK,EAC3B,QAASP,EAAeQ,CAAO,EAC/B,QAASR,EAAeS,CAAO,CACnC,CACA,CAEA,SAASZ,EAAgB,CAAE,KAAAS,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1DzB,EAAK,MAAM,YAAcsB,EACzBtB,EAAK,OAAO,YAAcuB,EAC1BvB,EAAK,SAAS,YAAcwB,EAC5BxB,EAAK,SAAS,YAAcyB,CAC9B"}